{% extends "base.html" %}
{% block title %}Profile — Forge Commerce{% endblock %}
{% block content %}
<div class="page-header">
    <h1>My Account</h1>
</div>

<div class="profile-layout">
    <section class="profile-section">
        <h2>Account Details</h2>
        {% if user %}
        <p><strong>Name:</strong> {{ user.name }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Member since:</strong> {{ user.created_at }}</p>
        {% endif %}
    </section>

    <section class="profile-section">
        <h2>Order History</h2>
        {% if orders | length == 0 %}
        <p>No orders yet. <a href="/products">Start shopping</a></p>
        {% else %}
        <div class="orders-list">
            {% for order in orders %}
            <div class="order-card">
                <div class="order-header">
                    <span class="order-id">{{ order.id | truncate(length=8, end="") }}</span>
                    <span class="order-status status-{{ order.status }}">{{ order.status }}</span>
                </div>
                <div class="order-details">
                    <span>${{ order.total | round(precision=2) }}</span>
                    <span>{{ order.created_at }}</span>
                </div>
                <div class="order-shipping">
                    <small>{{ order.shipping_name }} — {{ order.shipping_city }}, {{ order.shipping_zip }}</small>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </section>

    <section class="profile-section">
        <h2>Saved Addresses</h2>
        {% if addresses | length == 0 %}
        <p>No saved addresses yet.</p>
        {% else %}
            {% for addr in addresses %}
            <div class="address-card">
                <p><strong>{{ addr.name }}</strong></p>
                <p>{{ addr.address }}<br>{{ addr.city }} {{ addr.zip }}</p>
            </div>
            {% endfor %}
        {% endif %}
    </section>
</div>
{% endblock %}
